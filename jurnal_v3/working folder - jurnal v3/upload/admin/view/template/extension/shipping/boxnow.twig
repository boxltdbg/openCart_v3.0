{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-shipping" data-toggle="tooltip" title="{{ button_save }}"
          class="btn btn-primary" id="save-button"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i
            class="fa fa-reply"></i></a>
      </div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>

      <div class="alert alert-info">{{ heading_help }}</div>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-shipping"
          class="form-horizontal">

          <ul class="nav nav-tabs">
						<li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_settings }}</a></li>
						<li><a href="#tab-price" data-toggle="tab"> {{ tab_pricing }} </a></li>
					</ul>

          <div class="tab-pane active" id="tab-general">
              <div class="form-group">
                <div class="col-sm-12" style="text-align:center;">
                  <img style="max-width:600px;margin:0 auto;" src="/admin/view/image/boxnow_logo.png">
                </div>
              </div>

             <div class="form-group">
                <label class="col-sm-2 control-label" for="input-api_url">{{ entry_api_url }}</label>
                 <div class="col-sm-10">
                   <input type="text" name="shipping_boxnow_api_url" value="{{ shipping_boxnow_api_url }}"
                   placeholder="{{ entry_api_url }}" id="input-api_url" class="form-control" />
                 </div>
             </div>

             <div class="form-group">
                <label class="col-sm-2 control-label" for="input-client_id">{{ entry_client_id }}</label>
                 <div class="col-sm-10">
                   <input type="text" name="shipping_boxnow_client_id" value="{{ shipping_boxnow_client_id }}"
                    placeholder="{{ entry_client_id }}" id="input-client_id" class="form-control" />
                 </div>
             </div>

             <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-client_secret">{{ entry_client_secret }}</label>
                <div class="col-sm-10">
                  <input type="text" name="shipping_boxnow_client_secret" value="{{ shipping_boxnow_client_secret }}"
                  placeholder="{{ entry_client_secret }}" id="input-client_secret" class="form-control" />
                </div>
             </div>

             <div class="form-group">
                <label class="col-sm-2 control-label" for="input-warehouse_number">{{ entry_warehouse_number }}</label>
                <div class="col-sm-10">
                  <textarea name="shipping_boxnow_warehouse_number" id="input-warehouse_number" class="form-control" cols="30" rows="3" placeholder="{{ entry_warehouse_number }}">{{ shipping_boxnow_warehouse_number }}</textarea>
                </div>
             </div>

             <div class="form-group">
                 <label class="col-sm-2 control-label" for="input-partner_id">{{ entry_partner_id }}</label>
                <div class="col-sm-10">
                  <input type="text" name="shipping_boxnow_partner_id" value="{{ shipping_boxnow_partner_id }}"
                   placeholder="{{ entry_partner_id }}" id="input-partner_id" class="form-control" />
                </div>
             </div>
                <div class="form-group">
                <label class="col-sm-2 control-label" for="input-partner_name">
                    {{ entry_partner_name }}
                </label>
                <div class="col-sm-10">
                    <input type="text" name="shipping_boxnow_partner_name" value="{{ shipping_boxnow_partner_name }}"
                        placeholder="{{ entry_partner_name }}" id="input-partner_name" class="form-control" />
                </div>
            </div>

                <div class="form-group">
                <label class="col-sm-2 control-label" for="input-partner_email">
                    {{ entry_partner_email }}
                </label>
                <div class="col-sm-10">
                    <input type="text" name="shipping_boxnow_partner_email" value="{{ shipping_boxnow_partner_email }}"
                        placeholder="{{entry_partner_email }}" id="input-partner_email" class="form-control" />
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" for="input-partner_phone">
                    {{ entry_partner_phone }}
                </label>
                <div class="col-sm-10">
                    <input type="text" name="shipping_boxnow_partner_phone" value="{{ shipping_boxnow_partner_phone }}"
                        placeholder="{{ entry_partner_phone_hint }}" id="input-partner_phone" class="form-control" />
                </div>
            </div>

             <div class="form-group">
                <label class="col-sm-2 control-label" for="input-geo-zone">{{ entry_geo_zone }}</label>
                <div class="col-sm-10">
                  <select name="shipping_boxnow_geo_zone_id" id="input-geo-zone" class="form-control">
                   <option value="0">{{ text_all_zones }}</option>
                   {% for geo_zone in geo_zones %}
                   {% if geo_zone.geo_zone_id == shipping_boxnow_geo_zone_id %}
                   <option value="{{ geo_zone.geo_zone_id }}" selected="selected">{{ geo_zone.name }}</option>
                   {% else %}
                   <option value="{{ geo_zone.geo_zone_id }}">{{ geo_zone.name }}</option>
                   {% endif %}
                   {% endfor %}
                  </select>
               </div>
             </div>

             <div class="form-group">
                <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                <div class="col-sm-10">
                  <select name="shipping_boxnow_status" id="input-status" class="form-control">
                    {% if shipping_boxnow_status %}
                    <option value="1" selected="selected">{{ text_enabled }}</option>
                    <option value="0">{{ text_disabled }}</option>
                    {% else %}
                    <option value="1">{{ text_enabled }}</option>
                    <option value="0" selected="selected">{{ text_disabled }}</option>
                    {% endif %}
                 </select>
                </div>
             </div>

             <div class="form-group">
              <label class="col-sm-2 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
              <div class="col-sm-10">
                 <input type="text" name="shipping_boxnow_sort_order" value="{{ shipping_boxnow_sort_order }}"
                placeholder="{{ entry_sort_order }}" id="input-sort-order" class="form-control" />
              </div>
             </div>
        
          </div>
          <div class="tab-pane" id="tab-price">
             <div class="form-group">
                <div class="col-sm-12" style="text-align:center;">
                 <img style="max-width:600px;margin:0 auto;" src="/admin/view/image/boxnow_logo.png">
               </div>
             </div>

							<div class="form-group">
								<label class="col-sm-3 control-label" for="shipping_boxnow_weight"> {{entry_banned_weight}} </label>
								<div class="col-sm-9">
									<input class="form-control" type="text" id="shipping_boxnow_weight" name="shipping_boxnow_weight" value="{{ shipping_boxnow_weight }}" />
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-3 control-label" for="boxnow_weight_type"> {{entry_unit_of_measure}} </label>
								<div class="col-sm-9">
									<select class="form-control" id="boxnow_weight_type" name="shipping_boxnow_weight_type">
										<option value="kilogram" {% if shipping_boxnow_weight_type == 'kilogram' %}selected="selected"{% endif %}> {{entry_kilogram}} </option>
										<option value="gram" {% if shipping_boxnow_weight_type == 'gram' %}selected="selected"{% endif %}> {{entry_gram}} </option>
									</select>
								</div>
							</div>
						
							<div class="form-group">
								<label class="col-sm-3 control-label" for="boxnow_default_weight"> {{entry_cart_weight}} </label>
								<div class="col-sm-9">
									<input class="form-control" type="text" id="boxnow_default_weight" name="shipping_boxnow_default_weight" value="{{ shipping_boxnow_default_weight }}" />
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-3 control-label" for="boxnow_free_shipping">{{ entry_free_shipping }}</label>
										<div class="col-sm-9">
											<input type="text" name="shipping_boxnow_free_shipping" value="{{ shipping_boxnow_free_shipping }}" id="boxnow_free_shipping" class="form-control" />
										</div>
							</div>
             <div class="form-group">
                <label class="col-sm-3 control-label" for="input-tax-class">{{ entry_tax_class }}</label>
                <div class="col-sm-9">
                  <select name="shipping_boxnow_tax_class_id" id="input-tax-class" class="form-control">
                    <option value="0">{{ text_none }}</option>
                    {% for tax_class in tax_classes %}
                    {% if tax_class.tax_class_id == shipping_boxnow_tax_class_id %}
                    <option value="{{ tax_class.tax_class_id }}" selected="selected">{{ tax_class.title }}</option>
                    {% else %}
                    <option value="{{ tax_class.tax_class_id }}">{{ tax_class.title }}</option>
                    {% endif %}
                    {% endfor %}
                  </select>
                </div>
            </div>

            <div class="form-group">
							<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{help_categories}}"> {{entry_categories}} </span></label>
						 <div class="col-sm-9">
							 <div class="scroll-wrapper">
									<div class="well scroll">
											<div class="scroll-inner">
												{% for category in oc_categories %}
													<div>
														<label><input type="checkbox" name="shipping_boxnow_categories[]" value="{{ category.category_id }}" {% if category.category_id in shipping_boxnow_categories %}checked="checked"{% endif %} /> {{ category.name }}
														</label>
                          </div>
												{% endfor %}
											</div>
									</div>
									<div class="scroll-footer">
											<a class="expand-switcher"><i class="fa fa-angle-double-down"></i></a>
											<a class="select-all"> {{entry_select_all}} </a>
											<a class="select-none"> {{entry_remove_all}} </a>
									</div>
								</div>
							</div>
						</div>
             
               <div class="form-group">
                 <label class="col-sm-3 control-label" for="input-payment_modules"><span data-toggle="tooltip"
                  title="{{ help_payment_modules }}">{{ entry_payment_modules }}</span></label>
                 <div class="col-sm-9">
                    <div class="well well-sm" style="height: 150px; overflow: auto;"> {% for payment_module in payment_modules %}
                      <div class="checkbox">
                        <label> {% if payment_module.code in shipping_boxnow_payment_modules %}
                        <input type="checkbox" name="shipping_boxnow_payment_modules[]" value="{{ payment_module.code }}"
                         checked="checked" />
                         {{ payment_module.name }}
                         {% else %}
                        <input type="checkbox" name="shipping_boxnow_payment_modules[]" value="{{ payment_module.code }}" />
                         {{ payment_module.name }}
                        {% endif %} </label>
                     </div>
                     {% endfor %}
                    </div>
                   {% if error_complete_status %}
                   <div class="text-danger">{{ error_complete_status }}</div>
                   {% endif %}
                 </div>
               </div>

              <div class="form-group">
			            <input type="hidden" id="weight-value-row-counter" value="{{ weight_value_row }}" />
							    <table id="weight-value" class="table table-striped table-bordered table-hover">
								    <thead>
									    <tr>
										   <td class="text-left required">{{entry_weight_from}}</td>
										   <td class="text-left required">{{entry_weight_to}}</td>
										   <td class="text-left required">{{entry_fixed_price}}</td>
										   <td></td>
									    </tr>
								   </thead>
								  <tbody>
 
									
							
                  {% for weight_value in shipping_boxnow_weight_value %}
                   <tr id="weight-value-row{{ weight_value_row }}">
                     <td class="text-right"><input type="text" name="shipping_boxnow_weight_value[{{ loop.index }}][from]" value="{{ weight_value.from }}" class="form-control" /></td>
                     <td class="text-right"><input type="text" name="shipping_boxnow_weight_value[{{ loop.index }}][to]" value="{{ weight_value.to }}" class="form-control" /></td>
                     <td class="text-right"><input type="text" name="shipping_boxnow_weight_value[{{ loop.index }}][price]" value="{{ weight_value.price }}" class="form-control" /></td>
                     <td class="text-right"><button type="button" onclick="deleteRow(this);" data-bs-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                   </tr>
                 {% endfor %}
								</tbody>
 
								<tfoot>
									<tr>
										<td colspan="4"></td>
										<td class="text-right"><button type="button" onclick="addWeightValue();" data-toggle="tooltip" title="{{ button_weight_value_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
									</tr>
								</tfoot>
							    </table>
				      
              </div>

          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<style type="text/css">
  .form-horizontal input[type=text],
  .form-horizontal input[type=email],
  .form-horizontal input[type=url],
  .form-horizontal input[type=password],
  .form-horizontal input[type=search],
  .form-horizontal input[type=number],
  .form-horizontal input[type=tel],
  .form-horizontal input[type=range],
  .form-horizontal input[type=date],
  .form-horizontal input[type=month],
  .form-horizontal input[type=week],
  .form-horizontal input[type=time],
  .form-horizontal input[type=datetime],
  .form-horizontal input[type=datetime-local],
  .form-horizontal input[type=color],
  .form-horizontal textarea,
  .form-horizontal select {
    color: #666;
    border: 1px solid #ebebeb;
    border-radius: 0;
    max-width: 100%;
    color: #333;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    display: block;
    float: none;
    border: 1px solid #ccc;
    padding: 6px 10px;
    width: 100%;
    border-color: black !important;
    border-radius: calc(38 / 2560 * 100vw) !important;
    font-size: 15px;
    border-width: 2px !important;
    min-height: 50px;
    padding-left: 2rem;
    padding-right: 2rem;
  }

  #input-payment_modules {
    height: 150px;
    padding-right: 2rem;
  }

label[for="boxnow_default_weight"]:before {
    content: '*';
    color: red;
}
</style> 

<script type="text/javascript">
//Tabs function - start
    $(document).ready(function () {
        $('.tab-pane').hide();
        $('.tab-pane.active').show();

        $('ul.nav-tabs a').click(function (e) {
            e.preventDefault();

            $('.tab-pane').hide();

            var targetTab = $(this).attr('href');
            $(targetTab).show();

            $('ul.nav-tabs li').removeClass('active');
            $(this).parent('li').addClass('active');
        });
    });
//Tabs function - end
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const rows = document.querySelectorAll("table tbody tr");
    rows.forEach(function (row, index) {
      // Generate a unique class name based on the row index
      const rowIndex = index + 1;
      const className = `row-${rowIndex}`;
      row.classList.add(className);
    });
  });
</script>


<script>
// Weight rows handle - start
function addWeightValue() {
    var newRowNumber = $('#weight-value tbody tr').length + 1;
    var html = '<tr>';
    html += '  <td class="text-right"><input type="text" name="shipping_boxnow_weight_value[' + newRowNumber + '][from]" value="" placeholder="0.00" class="form-control" /></td>';
    html += '  <td class="text-right"><input type="text" name="shipping_boxnow_weight_value[' + newRowNumber + '][to]" value="" placeholder="0.00" class="form-control" /></td>';
    html += '  <td class="text-right"><input type="text" name="shipping_boxnow_weight_value[' + newRowNumber + '][price]" value="" placeholder="0.00" class="form-control" /></td>';
    html += '  <td class="text-right"><button type="button" onclick="deleteRow(this);" data-bs-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
    html += '</tr>';

    $('#weight-value tbody').append(html);
}


function deleteRow(button) {
    $(button).closest('tr').remove();
}

$('#save-button').click(function() {
    var weightData = [];

    // Iterate over the rows and collect data
    $('#weight-value tbody tr').each(function() {
        var from = $(this).find('input[name^="shipping_boxnow_weight_value"][name$="[from]"]').val();
        var to = $(this).find('input[name^="shipping_boxnow_weight_value"][name$="[to]"]').val();
        var price = $(this).find('input[name^="shipping_boxnow_weight_value"][name$="[price]"]').val();

        // Create an object for each row and push it to the weightData array
        weightData.push({
            from: from,
            to: to,
            price: price
        });
    });

    // Convert the weightData array to a JSON string
    var weightDataJson = JSON.stringify(weightData);

    // Add the JSON string as a hidden input field to the form
    $('<input>').attr({
        type: 'hidden',
        name: 'shipping_boxnow_weight_values',
        value: weightDataJson
    }).appendTo('#form-shipping');

    // Now, you can submit the form with the weight values included
    $('#form-shipping').submit();
});
// Weight rows handle - end
</script>



{{ footer }}